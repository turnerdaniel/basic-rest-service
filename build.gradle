buildscript {
	repositories {
		mavenCentral()
	}
}

plugins {
	id 'org.springframework.boot' version '2.4.0'
	id 'io.spring.dependency-management' version '1.0.10.RELEASE'
}

allprojects {
	version '0.0.1-SNAPSHOT'
	group 'uk.co.danielturner'

	repositories {
		mavenCentral()
	}
}

subprojects {
	apply plugin: 'java'
	apply plugin: 'org.springframework.boot'
	apply plugin: 'io.spring.dependency-management'
	apply plugin: 'jacoco'

	jar {
		enabled = true
	}

	test {
		useJUnitPlatform()
		finalizedBy jacocoTestReport
	}

	jacocoTestReport {
		dependsOn test
		reports {
			html.enabled false
			xml.enabled true
			xml.destination file("${buildDir}/reports/jacoco/coverage.xml")
		}
	}

	task version {
		doLast {
			println project.version
		}
	}
}
